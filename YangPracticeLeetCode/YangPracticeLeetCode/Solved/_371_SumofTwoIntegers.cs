using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace YangPracticeLeetCode.Solved
{
	class _371_SumofTwoIntegers
	{
		
		public static void Test()
		{
			Solution_Log s = new Solution_Log();

			//Console.WriteLine(s.NumPoints());

			//Console.WriteLine(s.GetSum(15, 2));
			Console.WriteLine(s.GetSum(15, -2));
			//Console.WriteLine(s.GetSum(2147483647, -2147483647));

		}


		/// <summary>
		/// 解 2 ok
		/// 這邊有加筆記了  也可以直接看sol
		/// https://leetcode.com/problems/sum-of-two-integers/solution/
		/// 解釋字多  看原文
		/// </summary>
		class Solution
		{
			public int GetSum(int a, int b)
			{
				while (b != 0)
				{
					int answer = a ^ b;
					int carry = (a & b) << 1;
					a = answer;
					b = carry;
				}

				return a;
			}
		}

		
//Solution log for  一正一負  
//因為原code  跟正正 完全相同  所以不同是在  一正一負
//a 01111
//b 11111111111111111111111111111110
//answer(a^b)   11111111111111111111111111110001
//carry(a&b)<<1 11100
//a 11111111111111111111111111110001
//b 11100
//answer(a^b)   11111111111111111111111111101101
//carry(a&b)<<1 100000
//a 11111111111111111111111111101101
//b 100000
//answer(a^b)   11111111111111111111111111001101
//carry(a&b)<<1 1000000
//a 11111111111111111111111111001101
//b 1000000
//answer(a^b)   11111111111111111111111110001101
//carry(a&b)<<1 10000000
//a 11111111111111111111111110001101
//b 10000000
//answer(a^b)   11111111111111111111111100001101
//carry(a&b)<<1 100000000
//a 11111111111111111111111100001101
//b 100000000
//answer(a^b)   11111111111111111111111000001101
//carry(a&b)<<1 1000000000
//a 11111111111111111111111000001101
//b 1000000000
//answer(a^b)   11111111111111111111110000001101
//carry(a&b)<<1 10000000000
//a 11111111111111111111110000001101
//b 10000000000
//answer(a^b)   11111111111111111111100000001101
//carry(a&b)<<1 100000000000
//a 11111111111111111111100000001101
//b 100000000000
//answer(a^b)   11111111111111111111000000001101
//carry(a&b)<<1 1000000000000
//a 11111111111111111111000000001101
//b 1000000000000
//answer(a^b)   11111111111111111110000000001101
//carry(a&b)<<1 10000000000000
//a 11111111111111111110000000001101
//b 10000000000000
//answer(a^b)   11111111111111111100000000001101
//carry(a&b)<<1 100000000000000
//a 11111111111111111100000000001101
//b 100000000000000
//answer(a^b)   11111111111111111000000000001101
//carry(a&b)<<1 1000000000000000
//a 11111111111111111000000000001101
//b 1000000000000000
//answer(a^b)   11111111111111110000000000001101
//carry(a&b)<<1 10000000000000000
//a 11111111111111110000000000001101
//b 10000000000000000
//answer(a^b)   11111111111111100000000000001101
//carry(a&b)<<1 100000000000000000
//a 11111111111111100000000000001101
//b 100000000000000000
//answer(a^b)   11111111111111000000000000001101
//carry(a&b)<<1 1000000000000000000
//a 11111111111111000000000000001101
//b 1000000000000000000
//answer(a^b)   11111111111110000000000000001101
//carry(a&b)<<1 10000000000000000000
//a 11111111111110000000000000001101
//b 10000000000000000000
//answer(a^b)   11111111111100000000000000001101
//carry(a&b)<<1 100000000000000000000
//a 11111111111100000000000000001101
//b 100000000000000000000
//answer(a^b)   11111111111000000000000000001101
//carry(a&b)<<1 1000000000000000000000
//a 11111111111000000000000000001101
//b 1000000000000000000000
//answer(a^b)   11111111110000000000000000001101
//carry(a&b)<<1 10000000000000000000000
//a 11111111110000000000000000001101
//b 10000000000000000000000
//answer(a^b)   11111111100000000000000000001101
//carry(a&b)<<1 100000000000000000000000
//a 11111111100000000000000000001101
//b 100000000000000000000000
//answer(a^b)   11111111000000000000000000001101
//carry(a&b)<<1 1000000000000000000000000
//a 11111111000000000000000000001101
//b 1000000000000000000000000
//answer(a^b)   11111110000000000000000000001101
//carry(a&b)<<1 10000000000000000000000000
//a 11111110000000000000000000001101
//b 10000000000000000000000000
//answer(a^b)   11111100000000000000000000001101
//carry(a&b)<<1 100000000000000000000000000
//a 11111100000000000000000000001101
//b 100000000000000000000000000
//answer(a^b)   11111000000000000000000000001101
//carry(a&b)<<1 1000000000000000000000000000
//a 11111000000000000000000000001101
//b 1000000000000000000000000000
//answer(a^b)   11110000000000000000000000001101
//carry(a&b)<<1 10000000000000000000000000000
//a 11110000000000000000000000001101
//b 10000000000000000000000000000
//answer(a^b)   11100000000000000000000000001101
//carry(a&b)<<1 100000000000000000000000000000
//a 11100000000000000000000000001101
//b 100000000000000000000000000000
//answer(a^b)   11000000000000000000000000001101
//carry(a&b)<<1 1000000000000000000000000000000
//a 11000000000000000000000000001101
//b 1000000000000000000000000000000
//answer(a^b)   10000000000000000000000000001101
//carry(a&b)<<1 10000000000000000000000000000000
//a 10000000000000000000000000001101
//b 10000000000000000000000000000000
//answer(a^b)   01101
//carry(a&b)<<1 00000
//13
//ok


		class Solution_Log
		{

			public int GetSum(int a, int b)
			{
				while (b != 0)
				{
					Console.WriteLine($"a {Convert.ToString(a,2).PadLeft5_0()}");
					Console.WriteLine($"b {Convert.ToString(b,2).PadLeft5_0()}");
					int answer = a ^ b;
					Console.WriteLine($"answer (a^b)   {Convert.ToString(answer, 2).PadLeft5_0()}" );
					int carry = (a & b) << 1;
					Console.WriteLine($"carry (a&b)<<1 {Convert.ToString(carry, 2).PadLeft5_0()}");

					a = answer;
					b = carry;
				}

				return a;
			}

		

		}




		/// <summary>
		/// 解1 在 java 沒問題  C# submit 有問題  本機卻沒問題   可能是網站問題  已提問
		/// 
		/// </summary>
		class Solution_V1
		{
			public int GetSum(int a, int b)
			{
				int x = Math.Abs(a), y = Math.Abs(b);
				// ensure that.Abs(a) >=.Abs(b)
				if (x < y) return GetSum(b, a);

				//.Abs(a) >=.Abs(b) --> 
				// a dete.Mines the sign
				int sign = a > 0 ? 1 : -1;

				if (a * b >= 0)
				{
					// sum of two positive integers x + y
					// where x > y
					while (y != 0)
					{
						int answer = x ^ y;
						int carry = (x & y) << 1;
						x = answer;
						y = carry;
					}
				}
				else
				{
					// difference of two positive integers x - y
					// where x > y
					while (y != 0)
					{
						int answer = x ^ y;
						int borrow = ((~x) & y) << 1;
						x = answer;
						y = borrow;
					}
				}
				return x * sign;
			}
		}




	}
}
